{% extends 'layout.html' %}

{% block title %}Книги{% endblock %}

{% block content %}
<div class="features">
    <h1>Доступные книги</h1>
    <form method="get" class="mb-3">
        <label for="sort_by">Сортировать по:</label>
        <select id="sort_by" name="sort_by" onchange="this.form.submit()">
            <option value="title" {% if sort_by == 'title' %}selected{% endif %}>Названию</option>
            <option value="genre" {% if sort_by == 'genre' %}selected{% endif %}>Жанру</option>
            <option value="author" {% if sort_by == 'author' %}selected{% endif %}>Автору</option>
        </select>
    </form>
    <ul class="list">
    {% for book in books %}
        <a href="{% url 'book' book_id=book.id%}">
         <li class="item">
            <div class="title">{{ book.title }}</div>
            <div class="title">{{ book.genre }}</div>
                {% for author in book.author.all %}
                    <div class="book-author">{{ author.name }}</div>
                {% endfor %}
         </li>
        </a>
    {% endfor %}
    </ul>
</div>
{% endblock %}
